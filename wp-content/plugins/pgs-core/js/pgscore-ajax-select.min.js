!function(c){"use strict";window.vc.atts.pgscore_ajax_select={render:function(e,t){return t},init:function(t,e){var a=e.find(".pgscore_ajax_select"),n=e.find(".wpb_element_label"),e=e.find(".pgscore_ajax_select").attr("data-option"),r=(a.select2({minimumInputLength:3,ajax:{delay:500,method:"POST",url:t.ajaxurl,dataType:"json",data:function(e){return{action:"pgs_ajax_select_autocomplete",action_type:"search",term:e.term,nonce:t.nonce,param_name:t.param_name,source_name:t.source_name,source_type:t.source_type,ajax_params:t,selected:a.val()}}},cache:!0}),[]);e&&(e=e.split(","),Array.isArray(e)||""==e?Array.isArray(e)&&(r=e.filter(function(e){return null!=e})):r=[e]),0<r.length&&(n.after('<span class="vc-control-spinner"></span>'),c.ajax({method:"POST",url:t.ajaxurl,data:{action:"pgs_ajax_select_autocomplete",action_type:"get_titles",nonce:t.nonce,param_name:t.param_name,source_name:t.source_name,source_type:t.source_type,ajax_params:t,selected:r}}).then(function(e){void 0!==e.results&&0<Object.keys(e.results).length&&(c.each(e.results,function(e,t){t=new Option(t.text,t.id,!0,!0);a.append(t).trigger("change")}),a.trigger({type:"select2:select",params:{data:e}})),n.siblings(".vc-control-spinner").remove()})),a.next().children().children().children().sortable({containment:"parent",stop:function(e,t){t.item.parent().children("[title]").each(function(){var e=c(this).attr("title"),e=c("option:contains("+e+")",a).first();e.detach(),a.append(e)}),a.change()}}),a.on("select2:select",function(e){e=e.params.data.element,e=c(e);e.detach(),c(this).append(e),c(this).trigger("change")})}}}(jQuery);