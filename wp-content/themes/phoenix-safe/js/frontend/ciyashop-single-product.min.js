jQuery(function($){function CiyaShop_ProductGallery($target,args){this.$target=$target,this.$images=$(".ciyashop-product-gallery__image",$target),this.$images_threesixty=$(".product-threesixty-zoom-img",$target),0===this.$images.length?this.$target.css("opacity",1):($target.data("product_gallery",this),$(window).width()<768?this.zoom_enabled=!1:this.zoom_enabled=!0,this.photoswipe_enabled=!0,args&&(this.zoom_enabled=!1!==args.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==args.photoswipe_enabled&&this.photoswipe_enabled),this.zoomInit=this.zoomInit.bind(this),this.initPhotoswipe=this.initPhotoswipe.bind(this),this.getGalleryItems=this.getGalleryItems.bind(this),this.openPhotoswipe=this.openPhotoswipe.bind(this),this.onResetSlidePosition=this.onResetSlidePosition.bind(this),this.zoom_enabled&&(this.zoomInit(),$target.on("cs_woocommerce_gallery_init_zoom",this.zoomInit)),this.photoswipe_enabled&&(this.initPhotoswipe(),$target.on("cs_woocommerce_gallery_reset_slide_position",this.onResetSlidePosition)))}var ciyashop_single_product_params_photoswipe_options={shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0};CiyaShop_ProductGallery.prototype.zoomInit=function(){if(!ciyashop_wc_single_product_params.zoom_enabled)return!1;var zoom_options,galleryWidth=this.$target.width(),zoomEnabled=!1,zoomTarget=$(".ciyashop-product-gallery__image");$(zoomTarget).each(function(index,target){if($(target).find("img").data("large_image_width")>galleryWidth)return!(zoomEnabled=!0)}),zoomEnabled&&(zoom_options=$.extend({touch:!1},ciyashop_wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement&&(zoom_options.on="click"),zoomTarget.trigger("zoom.destroy"),zoomTarget.zoom(zoom_options),setTimeout(function(){zoomTarget.find(":hover").length&&zoomTarget.trigger("mouseover")},100))},CiyaShop_ProductGallery.prototype.initPhotoswipe=function(){0<this.$images.length&&this.$target.on("click",".ciyashop-product-gallery_button-link-zoom",this.openPhotoswipe),0<this.$images_threesixty.length&&this.$target.on("click",".ciyashop-product-threesixty_button-link-zoom",this.openPhotoswipe),this.$target.on("click",".ciyashop-product-gallery__image a",this.openPhotoswipe)},CiyaShop_ProductGallery.prototype.onResetSlidePosition=function(){$(".ciyashop-product-gallery__wrapper").hasClass("slick-initialized")&&$(".ciyashop-product-gallery__wrapper").slick("slickGoTo",0)},CiyaShop_ProductGallery.prototype.getGalleryItems=function(){var $slides=this.$images,items=[];return 0<$slides.length&&$slides.each(function(i,el){el=$(el).find("img"),el={src:el.attr("data-large_image"),w:el.attr("data-large_image_width"),h:el.attr("data-large_image_height"),title:el.attr("data-caption")?el.attr("data-caption"):el.attr("title")};items.push(el)}),items},CiyaShop_ProductGallery.prototype.openPhotoswipe=function(e){e.preventDefault();var pswpElement=$(".pswp")[0],items=this.getGalleryItems(),e=($(e.target).is(".ciyashop-product-gallery_button-link-zoom"),this.$target.find(".slick-current")),e=$.extend({index:$(e).index()},ciyashop_single_product_params_photoswipe_options),photoswipe=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,e);photoswipe.init();photoswipe.getCurrentIndex();photoswipe.listen("afterChange",function(){var psIndexSlick=photoswipe.getCurrentIndex();$(".ciyashop-product-gallery__wrapper").hasClass("slick-initialized")&&$(".ciyashop-product-gallery__wrapper").slick("slickGoTo",psIndexSlick)})},$.fn.ciyashop_product_gallery=function(args){return new CiyaShop_ProductGallery(this,args),this},$(".ciyashop-product-gallery").each(function(){$(this).ciyashop_product_gallery()})});